(function(){!function(a){return a.fn.instawidget=function(b){if(this.options=b||{},!this.options.username)throw"Instawidget Error: You must provide a username via initialization options.";if(!this.options.access_token)throw"Instawidget Error: You must provide your access token via initialization options.";return this.responseSets=[],this.activeSet=0,a.ajax({url:"https://api.instagram.com/v1/users/search",type:"get",dataType:"jsonp",data:{q:this.options.username,access_token:this.options.access_token},error:function(a){return function(a){throw console.log(a),"Instawidget Error (see logs)"}}(this),success:function(b){return function(c){var d;return b.options.userid=c.data[0].id,d=b.options.hashtag?"https://api.instagram.com/v1/tags/"+b.options.hashtag+"/media/recent":"https://api.instagram.com/v1/users/"+b.options.userid+"/media/recent",a.ajax({url:d,type:"get",dataType:"jsonp",data:{access_token:b.options.access_token},success:function(a){return b.responseSets.push(a),b.renderImages()}})}}(this)}),this.renderImages=function(b){return function(){var c,d,e,f,g,h,i,j;for(j=b.responseSets[b.activeSet],c=a("<div id='instawidget-container' class='clearfix'>"),i=j.data,d=0,g=i.length;g>d;d++)e=i[d],f=a("<div class='instawidget-box'>"),f.append(a("<a href='"+e.link+"' target='_blank'><img src='"+e.images.standard_resolution.url+"' /></a>")),c.append(f);return h=a("<div class='pagination'>"),b.activeSet>0&&h.append(a("<button class='iw-prev mr2'>Previous</button>")),j.pagination.next_url&&h.append(a("<button class='iw-next'>Next</button>")),h.is(":empty")||c.append(h),b.find("#instawidget-container").remove(),b.append(c),b.bindPagination()}}(this),this.bindPagination=function(a){return function(){return a.find(".iw-prev").off("click"),a.find(".iw-prev").on("click",function(){return a.previousPage(),!1}),a.find(".iw-next").off("click"),a.find(".iw-next").on("click",function(){return a.nextPage(),!1})}}(this),this.previousPage=function(a){return function(){return a.activeSet-=1,a.renderImages()}}(this),this.nextPage=function(b){return function(){return b.responseSets.length>b.activeSet+1?(b.activeSet+=1,b.renderImages()):a.ajax({url:b.responseSets[b.activeSet].pagination.next_url,type:"get",dataType:"jsonp",success:function(a){return b.responseSets.push(a),b.activeSet+=1,b.renderImages()}})}}(this)}}(jQuery)}).call(this);